= *TutiFruti* v1.0 -- Dokumentacija
La Plávusha (Lazar Ljubenović, Marija Đorđević)
:toc:
:toclevels: 3

== O programu

TutiFruti je mala klijentska aplikacija namenjena za prikaz.

Razvijena je za potrebe predmeta Veštačka inteligencija na trećoj i četvrtoj godini osnovnih akademskih studija Elektronskog fakulteta u Nišu.

=== Način rada

Aplikacija služi za razmenu trenutnog stanja table među igračima.
Igrači su predstavljeni Lisp serverima, podignuti na različitim portovima.

Sama aplikacija ne nudi nikakvu logiku za igranje igara, već služi samo kao grafička reprezentacija.

Igrači ne treba da znaju detalje rada aplikacije, već samo da iskoriste objekat opisan u nastavku.





== Struktura objekta

Objekat koji služi za prikaz stanja igre podeljen je u četiri celine (podobjekte), koje sadrže:

- informacije o tipu table na kojoj se igra igra (`board`),
- informacije o igraču (`player`),
- informacije o trenutnom stanju table (`state`) i
- dodatne informacije o obeležavanju pojedinih polja table (`markings`),
- informacije o figurama koje su "izbačene" sa table, ako takve postoje (`removed`),
- podaci o tabli čitljivi mašinama koji se ignorišu (`report`).

=== Grupa `board`

Podobjekat `board` u sebi sadrži osnovne informacije o tipu, veličini i izgledu table.
Ovaj objekat u skoro svim igrama ostaje nepromenjen dokom trajanja partije.
Sadrži svojstva `type`, `dimensions`, `corner`, `axis`, `coloring`, `mode` i `size`.

==== Svojstvo `type`

===== Podržane vrednosti

Stringovi `rectangular`, `hexagonal-flat`, `hexagonal-pointy`.

===== Podrazumevana vrednost

String `rectangular`.

===== Opis

Definiše osnovni izgled table i polja na njoj.

- Kada se podesi na `rectangular`, polja su *kvadratnog* oblika, a cela tabla ima oblik pravougaonika. 
- Kada se podesi na `hexagonal-flat`, polja su oblika pravilnih *šestouglova* (kod kojih je sa gornje strane teme), a cela tabla ima oblik šestougla kod kojeg je sa gornje strane stranica.
- Kada se podesi na `hexagonal-pointy`, polja su oblika pravilnih *šestouglova* (kod kojih je sa gornje strane stranica), a cela tabla ima oblik šestougla kod kojeg je sa gornje strane teme.

Utiče na moguće vrednosti svojstava `dimensions`, `corner`, `coloring` i `mode`.

==== Svojstvo `dimensions`

===== Podržane vrednosti

Niz od dva ili tri nenegativna cela broja.

- Ukoliko `type` ima vrednost `rectangular`, `dimensions` mora da ima dva elementa.
- Ukoliko `type` ima vrednost `hexagonal-flat` ili `hexagonal-pointy`, `dimensions` mora da ima tri elementa.

Mada ne postoji tehničko ograničene po pitanju maksimalne dozvoljene veličine, ne preporučuje se unošenje dimenzija preko `20` za niz od dva elemenata, odnosno `10` za niz od tri elemenata.

===== Podrazumevana vrednost

`[8, 8]` ili `[6, 6, 6]`, u zavisnosti od vrednosti svojstva `type`.

===== Opis

Ukoliko `type` ima vrednost `rectangular`:

- Prvi element niza se odnosi na broj vrsta u tabli (drugim rečima, predstavlja njenu visinu izraženu u broju polja).
- Drugi element niza se odnosi na broj kolona u tabeli (drugim rečima, predstavlja njenu dužinu izraženu u broju polja).

Ukoliko `type` ima vrednost `hexagonal-flat`:

- Prvi element niza predstavlja broj polja koji se pružaju duž gornje leve i donje desne ivice table.
- Drugi element niza predstavlja broj polja koji se pružaju duž gornje i donje ivice table.
- Treći element niza predstavlja broj polja koji se pružaju duž gornje desne i donje leve ivice table.

Ukoliko `type` ima vrednost `hexagonal-pointy`:

- Prvi element niza predstavlja broj polja koji se pružaju duž gornje leve i donje desne ivice table.
- Drugi element niza predstavlja broj polja koji se pružaju duž gornje desne i donje leve ivice table.
- Treći element niza predstavlja broj polja koji se pružaju duž leve i desne ivice table.




==== Svojstvo `corner`

===== Podržane vrednosti

Osnovne vrednosti koje su uvek podržane su `bottom-left`, `top-left`, `top-right` i `bottom-right`.
Ukoliko `type` ima vrednost `rectangular`, podržane vrednosti su samo osnovne vrednosti.
Ukoliko `type` ima vrednost `hexagonal-flat`, pored osnovnih, podržane su i vrednosti `left` i `right`.
Ukoliko `type` ima vrednost `hexagonal-pointy`, pored osnovnih, podržane su i vrednosti `top` i `bottom`.

===== Podrazumevana vrednost 

String `bottom-left` (nezavisno od vrednosti svojstva `type`).

Daje informaciju o tome iz kog ugla počinje označavanje polja tabele (same oznake se određuju na osnovu svojstva `axis`).

TODO slika.




==== Svojstvo `axis`

===== Podržane vrednosti

Niz od dva stringa.
Stringovi predstavljaju oznake koje će se koristiti pri označavanju polja tabele, pri čemu je svaka oznaka odvojena blanko znakom.
Broj ovih oznaka mora biti u skladu sa dimenzijama datim u `dimensions` i vrstom table datom u `type`.
Ukoliko je `type` podešeno na `hexagonal-flat` ili `hexagonal-pointy`, u obzir se uzima i vrednost svosjtva `corner`.

Kada je `type` podešeno na `rectangular`, broj oznaka prvog stringa mora biti isti kao prva dimenzija, a broj oznaka drugog stringa mora biti isti kao druga dimenzija.

Kada je `type` podešeno na `hexagonal-pointy`, broj oznak prvog stringa mora biti isti kao zbir dveju dimenzija koje se protežu iz tog ugla, pri čemu se prvo gleda smer kazaljke na satu, a zatim smer suprotan kretanu kazaljke na satu. Na primer, ako je svojstvo `corner` podešeno na `bottom-left`, broj oznaka u prvom stringu mora biti jednak `c + a`, a u drugom mora biti jednak `b + a`, pri čemu su `a`, `b` i `c` redom dimenzije date u `dimensions`.

Analogno važi i za slučaj kada je `type` podešeno na `hexagonal-flat`.

Agent prikazuje deskriptivnu grešku ukoliko uslovi nisu ispunjeni i prestaje sa radom (osim u nekim slučajevima; vidi dole).

[NOTE]
====
TutiFruti će prijaviti grešku ukoliko je broj prosleđenih oznaka manji od zahtevanog.
Međutim, ukoliko je on veći, samo će prijaviti upozorenje.
Zato nije neophodno stalno "tempiranje" ovih vrednosti tokom razvitka agenata, već se one mogu jednostavno postaviti na vrednosti koje sigurno ispunjavaju svaku tablu, npr. `I II III IV V ... XX` ili `a b c d e ... y z`.
====

===== Podrazumevana vrednost

Elementi niza su `1 2 3 4 ... 25 26` i `A B C D ... Y Z`.

===== Opis

TODO slika





==== Svojstvo `coloring`

===== Podržane vrednosti

Stringovi `classic` i `chess`.

===== Podrazumevana vrednost

String `classic`.

===== Opis

Definiše način bojenja polja.
Ukoliko je podešeno na `classic`, polja će dobiti podrazumevanu boju u skladu s temom aplikacije.
Ukoliko je podešeno na `chess`, a `type` na `rectangular`, polja će naizmenično dobiti crnu i belu boju, kao na šahovskoj tabli.
Ukoliko je podešeno na `chess`, a `type` na `hexagonal-flat` ili `hexagonal-pointy`, polja će dobijati crnu, sivu i belu boju, tako da nijedna dva susedna ne budu obojena istom bojom.




==== Svojstvo `mode`

===== Podržane vrednosti

Stringovi `classic` i `circles`.
Ako je `type` podešeno na `rectangular`, podržana je i vrednost `go`.

===== Podrazumevana vrednost

String `classic`.

===== Opis

Definiše način prikazivanja polja.

Ukoliko je podešeno na `classic`, a `type` na `rectangular`, polja će biti kvadrati.
Ukoliko je podešeno na `classic`, a `type` na `hexagonal-flat` ili `hexagonal-pointy`, polja će biti šestouglovi (odgovarajuće orijentacije).
U oba slučaja će figure biti postavljane u unutrašnjosti kvadrata, odnosno šestouglova.

Ukoliko je podešeno na `circles`, sva polja će biti krugovi.
Figure se postavljaju u unutrašnjosti ovih krugova.

Vrednost `go` je validna samo ako je tip table podešen na `rectangular`.
U tom slučaju se mreža naizgled smanjuje, i ima po jedno polje manje u obe dimenzije, ali je to zapravo samo privid jer se figure smeštaju na preseke linija koje čine tu mrežu.




==== Svojstvo `size`

===== Podržane vrednosti

Stringovi `xxs`, `xs`, `s`, `m`, `l`, `xl` i `xxl`.

===== Podrazumevane vrednosti

String `m`.

===== Opis

Govori o fizičkoj veličini polja. 
`xxs` je najmanja, a `xxl` je najveća veličina.








=== Grupa `player`

`player` je objekat koji sadrži tri svojstva: `name` (opciono), `order` i `message` (opciono).

==== Svojstvo `name`

===== Podržane vrednosti

Proizvoljan string. Ne preporučuju se vrednosti preko 20 karaktera.

===== Podrazumevana vrednost

`Igrač 1` ili `Igrač 2`, u zavinosti od vrednosti svojstva `order`.

===== Opis

Koristi se da bi se prikazalo ime igrača, tima ili agenta koji stoji iza poteza.





==== Svojstvo `order`

===== Podržane vrednosti

Brojevi `1` ili `2`.

===== Podrazumevana vrednost

Nema.
Program prijavljuje grešku ukoliko dobije objekat koji sadrži nevalidnu vrednost ovog polja.

===== Opis

Koristi se da bi se identifikovao igrač koji šalje prikaz stanja table.



==== Svojstvo `message`

*Podržane vrednosti*: String enkodovan koristeći UTF-8.

*Podrzaumevana vrednost*: Prazan string.

Može se koristiti za bilo koju svrhu.
Služi za komunikaciju između mašine i čoveka.
Može sadržati neke informacije od koristi za debagiranje (npr. odigrani potez), ili šaljive poruke.





=== Grupa `state`

`state` je niz objekata kojima se određuju koje se figure trenutno nalaze na tabli, kao i njihove pozicije.
Figure su određene oblikom (`shape`) i bojom (`color`).

Svaki od elemenata niza mora biti objekat sa ključevima `style` i `fields`.

`style` je objekat koji se sastoji od ključeva `color` i `shape`.

`color` je string koji određuje *boju* kojom figura treba da bude obojena.
Podržane su sledeće vrednosti:

 - `red`, `pink`, `purple`, `deep-purple`, `indigo`, `blue`, `light-blue`, `cyan`, `teal`, `green`, `light-green`, `lime`, `yellow`, `amber`, `orange`, `deep-orange`, `brown`, `grey`, `blue-grey`, `black` i `white`.

`shape` je string koji određuje *oblik* kojim figura terba da bude predstavljena.
Podržane su sledeće vrednosti:

- osnovni oblici: `O`, `X`, `circle`, `square`, `star`;
- strelice: `arrow-left`, `arrow-right`, `arrow-up` `arrow-down`, `angle-left`, `angle-right`, `angle-up`, `angle-down`, `angle-double-left`, `angle-double-right`, `angle-double-up`, `angle-double-down`;
- znaci za obeležavanje: `crosshairs`, `bullseye`, `check`, `check-circle`, `minus`, `plus`;
- znaci sa karata: `suit-spade-outline`, `suit-spade-fill`, `suit-heart-fill`, `suit-heart-outline`, `suit-diamond-fill`, `suit-diamond-outline`, `suit-club-fill`, `suit-club-outline`;
- brojevi i slova: `number-1`, `number-2`, ..., `number-99`; `letter-A`, `letter-B`, ..., `letter-Z`; `letter-a`, `letter-b`, ..., `letter-z`;
- skup vrednosti za igranje šaha: `chess-king-outline`, `chess-king-fill`, `chess-queen-outline`, `chess-queen-fill`, `chess-rock-outline`, `chess-rock-fill`, `chess-bishop-outline`, `chess-bishop-fill`, `chess-knight-outline`, `chess-knight-fill`, `chess-pawn-outline`, `chess-pawn-outline`.

TODO slika

`fields` je niz gde svaki element predstavlja koordinate na koje se postavlja figura, čiji su boja i oblik definisani u `style`.
Koordinate poštuju
Svaki element ovog niza je novi niz od dva elemenata, gde elementi čine koordinate.
Ove koordiante poštuju konvenciju navedenu u `board.axis` i `board.corner`.

Ukoliko koordinate u `fields` nisu deo definisane table, prikazuje se upozorenje.
Slično, ukoliko dve figure imaju iste koordinate, prikazuje se upozorenje.

TODO slike





=== Grupa `markings`

`markings` je niz sličan nizu `state`. 
Služi za obeležavanje nekih polja za posebne namene (npr. poslednje odigrani potez, mogući potezi, itd).

Prikazuju se izbledelom bojom iznad poljā koje je specificirano u `fields`.

[NOTE]
====
Mada TutiFruti to ne brani, savetuje se korišćenje jednostavnih oblika kao što su `circle`, `O` i `square`, kao i izbegavanje korišćenja istih oblika i boja za figure i za oznake, kako bi se izbegla eventualna konfuzija oko toga šta su figure a šta oznake.
====




=== Grupa `removed`

`removed` predstavlja figure koje su izbačene sa table.
U pitanju je niz od dva elemenata: prvi element se odnosi na prvog, a drugi na drugog igrača.

Svaki od nizova sadrži objekte sa ključevima `number` i `style`.
`style` prati istu konveciju opisanu ranije.

`nubmer` je broj ponavljanja izbačene figure (nenegativan ceo broj).




=== Grupa `report`

`report` je opcina struktura koji služi za pojednostavljeni prikaz table koji je čitljiv mašinama.
Ne utiče na prikaz; TutiFruti ga ignoriše i samo ga prosleđuje među takmičarima.















